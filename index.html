<html>

<head>
    <title>Garage</title>
</head>

<body>
    <h1>Garage</h1>

    <h2>To add Car</h2>

    <input type="text" id="name" placeholder="Name"></input>

    <br>
    <br>

    <input type="text" id="model" placeholder="Model"></input>

    <button onclick="addCar()">Add Car</button>

    <br>
    <br>

    <select id="faultSelect">
        <option value="engine">Engine</option>
        <option value="window">Window</option>
    </select>
    <button onclick="faultSet()">Add Fault</button>

    <br>

    <button onclick="displayGarage()">See all cars in Garage</button>
    <br>
    <br>
    <button onclick="displayRemoveCar()">To remove Car</button>
    <button onclick="finalDelete()">TO DELETE</button>

    <div id="displayG">
    </div>

    <!-- <button onclick="faultList()">Add Fault</button> -->

    <script type="text/javascript">
        let carArr = [];
        let faultUser = [];
        function addCar(name, model, fault) {
            name = document.getElementById("name").value;
            model = document.getElementById("model").value;
            // faultSet();
            fault = faultUser;
            let money = 0;
            let car = { name: name, model: model, fault: fault, money: money};
            // faultList();
            
            carObjArray(car.name, car.model, car.fault, car.money);
            clearFaultArray();
        }

        function carObjArray(name, model, fault, money) {
            if(fault.length > 1){
                money=100;
            }else{
                money=50;
            }
            carArr.push(name + "/" + model + "/" + fault+"/"+money);
            console.log(carArr);
            console.log(carArr.length);
            newCarDiv(name, model, fault, money);
        }

        function displayGarage() {
            // document.write(carArr[i] + '<br />');
            if (carArr.length > 0) {
                document.getElementById("displayG").innerHTML = carArr.join("<br>");
            } else {
                alert("The garage is currently empty");
            }
        }
        function newCarDiv(name, model, fault, money) {
            let x = document.createElement("div");
            let d = document.createTextNode(name + " " + model + " " + fault+" "+"Â£"+money);
            x.appendChild(d);
            document.body.appendChild(x);
        }

        function clearFaultArray() {
            faultUser = [];
        }

        function faultSet() {
            let f = document.getElementById("faultSelect");
            faultUser.push(f.options[f.selectedIndex].value);
        }

        function displayRemoveCar(name) {
            let id;
            for (let i = 0; i < carArr.length; i++) {
                let label = document.createElement("label");
                let radio = document.createElement("input");
                radio.type = "radio";
                radio.name = carArr[i];
                radio.value = carArr[i];
                radio.id = i;
                id=i;
                label.appendChild(radio);
                label.appendChild(document.createTextNode(carArr[i]));
                document.body.appendChild(label);
            }
            
             d = document.getElementById(id).checked;
                if (d == true) {
                    finalDelete(id);
                }
        }

        // function removeCar(i) {
        //     let d = document.getElementById(i).checked;
        //     if (d == true) {
        //         finalDelete(i);
        //     }
        // }

        function finalDelete(id) {
            carArr.splice(id, 1);
            console.log(carArr);
        }
        // function faultList() {
        //     let y = document.getElementById("fault");
        //     if(y===null){
        //     let select = document.createElement('select');
        //     select.setAttribute("name", "fault");
        //     select.setAttribute("id", "fault");
        //     select.appendChild(new Option("Tyre", "tyre"));
        //     select.appendChild(new Option("Window", "window"));
        //     select.appendChild(new Option("Engine", "engine"));
        //     document.body.appendChild(select);
        //     getSelected(select);
        //     }else{
        //         document.getElementById("fault").remove();
        //     }
        // }

        // function getSelected(select) {
        //     faultUser = select.options[select.selectedIndex].text;
        // }

        Element.prototype.remove = function () {
            this.parentElement.removeChild(this);
        }
        NodeList.prototype.remove = HTMLCollection.prototype.remove = function () {
            for (var i = this.length - 1; i >= 0; i--) {
                if (this[i] && this[i].parentElement) {
                    this[i].parentElement.removeChild(this[i]);
                }
            }
        }
    </script>
</body>

</html>